query TenantIdScreen($id: Int!) {
	tenants_by_pk(id: $id) {
		...tenantDetails
		...crumbs
		...pastLeases
	}
	...recentTransactions
}

fragment tenantDetails on tenants {
	id
	first_name
	last_name
	email
	phone
	dob
	civilid
	second_name
	third_name
}

fragment crumbs on tenants {
	id
	leases(order_by: { end_date: desc }, limit: 1) {
		id
		unit {
			id
			property {
				id
				client {
					id
				}
			}
		}
	}
}

fragment pastLeases on tenants {
	pastLeases: leases(order_by: { end_date: desc }) {
		id
		start_date
		end_date
		is_expired
		is_signed
		monthly_rent
		unit_id
		deposit
	}
}

fragment recentTransactions on query_root {
	transactions(
		where: { lease: { tenant_id: { _eq: $id } } }
		order_by: { created_at: desc }
		limit: 5
	) {
		id
		amount
		created_at
		due_date
		is_paid
		receipt_url
		memo
		lease_id
	}
}

query TenantsList(
	$limit: Int
	$offset: Int
	$order_by: [tenants_order_by!] = {}
	$where: tenants_bool_exp = {}
) {
	tenants(order_by: $order_by, limit: $limit, offset: $offset, where: $where) {
		...tenantDetails
	}
	agg: tenants_aggregate {
		aggregate {
			count
		}
	}
}

mutation DeleteTenant($id: Int!) {
	delete_tenants_by_pk(id: $id) {
		id
	}
}

mutation TenantsInsert($object: tenants_insert_input = {}) {
	insert_tenants_one(object: $object) {
		...tenantDetails
	}
}

mutation TenantsUpdate($id: Int!, $_set: tenants_set_input) {
	update_tenants_by_pk(pk_columns: { id: $id }, _set: $_set) {
		...tenantDetails
	}
}

query TenantEditScreen($id: Int!) {
	...tenantBasics
}

fragment tenantBasics on query_root {
	tenants_by_pk(id: $id) {
		...tenantDetails
	}
}
