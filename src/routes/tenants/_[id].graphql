query TenantsByIdLocal(
	$id: Int!
	$with_crumbs: Boolean!
	$with_past_leases: Boolean!
) {
	tenants_by_pk(id: $id) {
		...tenantDetails
		...crumbs @include(if: $with_crumbs)
		pastLeases: leases @include(if: $with_past_leases) {
			...pastLeases
		}
	}
}

query TenantBreadcrumbs($id: Int!) {
	tenants_by_pk(id: $id) {
		...crumbs
	}
}
query TenantPastLeases($id: Int!) {
	tenants_by_pk(id: $id) {
		id
		pastLeases: leases(order_by: { end_date: desc }) {
			...pastLeases
		}
	}
}
fragment tenantDetails on tenants {
	id
	first_name
	last_name
	email
	phone
	dob
	civilid
	second_name
	third_name
}

fragment crumbs on tenants {
	id
	leases(order_by: { end_date: desc }, limit: 1) {
		id
		unit {
			id
			property {
				id
				client {
					id
				}
			}
		}
	}
}

fragment pastLeases on leases {
	id
	start_date
	end_date
	is_expired
	is_signed
	monthly_rent
	unit_id
	deposit
}

query TenantsList(
	$limit: Int
	$offset: Int
	$order_by: [tenants_order_by!] = {}
) {
	tenants(order_by: $order_by, limit: $limit, offset: $offset) {
		...tenantDetails
	}
	agg: tenants_aggregate {
		aggregate {
			count
		}
	}
}
